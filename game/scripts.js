!function(){var e={776:function(){document.addEventListener("DOMContentLoaded",(()=>{const e=document.body.querySelector(".gameResults"),t=e?.querySelector(".gameResults__newGameBtn")??null;t?.addEventListener("click",(e=>{e.preventDefault(),location.reload()}))}))},364:function(e,t,n){const{getAbsPath:r}=n(16);document.addEventListener("DOMContentLoaded",(()=>{Array.from(document.body.querySelectorAll(".menu__item")??[]).forEach((e=>e.setAttribute("href",r(e.getAttribute("href")??""))))}))},130:function(e){e.exports=[{name:"main",browserTitle:"Star Clicker: описание",pageTitle:"Что такое Star Clicker?",menuTitle:"Описание"},{name:"stats",browserTitle:"Star Clicker: статистика",pageTitle:"Статистика игр",menuTitle:"Статистика"},{name:"game",browserTitle:"Star Clicker: игра",menuTitle:"Играть!"}]},16:function(e,t,n){"use strict";n.r(t),n.d(t,{getAbsPath:function(){return a}});var r=n(130);const s=n.n(r)().map((({name:e})=>e)),o=`/${location.pathname.split("/").filter((e=>!!e)).filter((e=>!s.includes(e)&&"index.html"!==e)).join("/")}`;function a(e="/"){return`${o}${e}`.replace("//","/")}},427:function(e){e.exports={toggleClsInList:function(e,t,n){e.forEach(((e,r)=>{const s=Number.isFinite(t)?r===t:e===t;e.classList.toggle(n,s)}))},formatNumeralItem:function(e,t){let n=`${e} `;if((e%=100)>=11&&e<=19)n+=t[2];else switch(e%10){case 1:n+=t[0];break;case 2:case 3:case 4:n+=t[1];break;default:n+=t[2]}return n},isPlainObject:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)},formatTime:function(e){const t=60*(new Date).getTimezoneOffset()*1e3;return new Date(e+t).toLocaleTimeString().replace(/^(00:)?/,"")},prettyDateTime:function(e=new Date){const t=e.toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return`${e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}, ${t}`},toggleDisabled:function(e,t){e.disabled=void 0===t?!e.disabled:t}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";n(364);class e{events={};_availiableEvents=[];on(e,t){if(!this._checkEvent(e))throw new Error(`Unknown event ${e}`);this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,...t){if(!this._checkEvent(e))throw new Error(`Unknown event ${e}`);this.events[e]&&this.events[e].forEach((e=>{e(...t)}))}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter((e=>e!==t)))}_checkEvent(e){return!this._availiableEvents.length||this._availiableEvents.includes(e)}}function t(e,t){let n;try{n=e()}catch(e){if(r(e),t)try{n=t()}catch(e){r(e)}}return n}function r(e){alert(`Произошла ошибка: \n    ${e instanceof Error?e.message:"string"==typeof e&&e.length?e:"неизвестная ошибка"}\n  `),console.error(e)}var s=JSON.parse('{"CoolUser":[{"score":100,"datetime":123131232,"gametime":543,"clicks":150,"caught":5,"missed":7},{"score":200,"datetime":45123131232,"gametime":456,"clicks":230,"caught":34,"missed":56}],"zombie88":[{"score":100,"datetime":123131232,"gametime":543,"clicks":150,"caught":5,"missed":7},{"score":200,"datetime":45123131232,"gametime":456,"clicks":230,"caught":34,"missed":56}],"Pe40nkin":[{"score":100,"datetime":123131232,"gametime":543,"clicks":150,"caught":5,"missed":7}]}'),o=new class{_emitter=new e;_stats=[];constructor(){this.users.length||t((()=>{localStorage.setItem("gameStats",JSON.stringify(s))}))}set user(e){null===e?localStorage.removeItem("user"):localStorage.setItem("user",e)}get user(){return localStorage.getItem("user")}get users(){return Object.entries(this.gameStats).map((([e])=>e))}get gameStats(){return t((()=>{const e=localStorage.getItem("gameStats");return e?JSON.parse(e):{}}),(()=>({})))}regGameStat(e){const n=this.user||"";if(!n)throw new Error("No user for reg stat");const r=this.gameStats?.[n]??[];r.push(e),t((()=>{localStorage.setItem("gameStats",JSON.stringify({...this.gameStats,[n]:r}))}))}on(e,t){this._emitter.on(e,t)}startGame(){this._emitter.emit("gameStarted")}finishGame(){this._emitter.emit("gameFinished")}clearGameStats(){localStorage.removeItem("gameStats")}};const a={score:0,datetime:0,gametime:0,clicks:0,caught:0,missed:0};class i{_stats=a;_emitter=new e;get stats(){return this._stats}get isPaused(){return!1}start(){this._stats={score:111,datetime:Date.now(),gametime:543,clicks:150,caught:5,missed:7}}finish(){}pause(){}resume(){}on(e,t){this._emitter.on(e,t)}}var c=new class{_scoreCounter=null;_timeCounter=null;build(){const e=document.body.querySelector(".gamePlayground")??null,t=e?.querySelector(".gamePlayground__finishBtn")??null;t?.addEventListener("click",(e=>{e.preventDefault(),o.finishGame()})),this._timeCounter=e?.querySelector(".gamePlayground__indicator_time")??null,this._scoreCounter=e?.querySelector(".gamePlayground__indicator_score")??null}set score(e){this._scoreCounter&&(this._scoreCounter.textContent=e)}set time(e){this._timeCounter&&(this._timeCounter.textContent=e)}};function l(e){const t=t=>e[t.key]?.(t);return document.body.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}var u=n(427);document.addEventListener("DOMContentLoaded",(()=>{document.body.querySelectorAll(".tabs").forEach((e=>{const t=Array.from(e.querySelectorAll(".tabs__tab")??[]);t.forEach((n=>{n.addEventListener("click",(n=>{const r=n.currentTarget,s=t.indexOf(r),o=Array.from(e.querySelectorAll(".tabs__content")??[]);(0,u.toggleClsInList)(t,r,"tabs__tab_active"),(0,u.toggleClsInList)(o,s,"tabs__content_opened")}))}))}))}));document.addEventListener("DOMContentLoaded",(()=>{const e=document.body.querySelector(".gameGreeting"),t=e?.querySelector(".gameGreeting__welcomeUser")??null,n=e?.querySelector(".gameGreeting__startBtn")??null;n?.addEventListener("click",(e=>{e.preventDefault(),o.startGame()})),l({Enter:()=>o.startGame()});const r=e?.querySelector(".gameGreeting__addUserInput")??null;r?.addEventListener("input",(function(e){const t=e.target;s&&(0,u.toggleDisabled)(s,!1),t.value.length>5&&c(t.value)})),r?.addEventListener("paste",(function(e){const t=e.clipboardData?.getData("text")??"";s&&(0,u.toggleDisabled)(s,!1),c(t)||e.preventDefault()}));const s=e?.querySelector(".gameGreeting__addUserBtn")??null;s?.addEventListener("click",(e=>{e.preventDefault();const t=r?.value??"";c(t)&&i(t)})),s&&(0,u.toggleDisabled)(s,!0);const a=e?.querySelector(".gameGreeting__chooseUserBtn")??null;function i(e){o.user=e,n&&(n.style.display=e?"initial":"none"),t&&(t.textContent=e||""),r&&(r.value="")}function c(e){const t=new RegExp("^[a-zA-Z0-9_-]{5,20}$").test(e);return t||(s&&(0,u.toggleDisabled)(s,!0),alert("Задано некорректное имя!")),t}a?.addEventListener("click",(t=>{t.preventDefault();const n=e?.querySelector("input[type='radio'][name='users']:checked")??null,r=n?.value;r&&i(r)})),i(o.user)}));n(776);let m,d,g,f,h;o.on("gameStarted",(()=>{m=new i,m.start(),m.on("scoreChanged",(e=>{c.score=e})),m.on("timeChanged",(e=>{c.time=e})),h=l({Escape:()=>o.finishGame()," ":()=>m.isPaused?m.resume():m.pause()}),d&&(d.style.display="none"),g&&(g.style.display="block"),f&&(f.style.display="none")})),o.on("gameFinished",(()=>{m.finish(),o.regGameStat(m.stats),h(),g&&(g.style.display="none"),f&&(f.style.display="block")})),document.addEventListener("DOMContentLoaded",(()=>{d=document.body.querySelector(".game__greeting"),g=document.body.querySelector(".game__playground"),f=document.body.querySelector(".game__results"),c.build()}))}()}();